---
title: "TypeScriptå…¥é–€ - Reactã§ä½¿ã†ä¸»ãªå‹å®šç¾©"
emoji: "ğŸ“˜"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["typescript", "react", "frontend"]
published: true
---

# ã¯ã˜ã‚ã«

Reactã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§TypeScriptã‚’ä½¿ç”¨ã™ã‚‹éš›ã«å¿…è¦ã¨ãªã‚‹ã€åŸºæœ¬çš„ãªå‹å®šç¾©ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚TypeScriptã‚’å°å…¥ã™ã‚‹ã“ã¨ã§ã€å‹å®‰å…¨æ€§ãŒå‘ä¸Šã—ã€é–‹ç™ºä½“é¨“ãŒå¤§å¹…ã«æ”¹å–„ã•ã‚Œã¾ã™ã€‚

## ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‹å®šç¾©

### é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åŸºæœ¬

Reactã®é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã¯ã€`React.FC`ï¼ˆFunction Componentï¼‰å‹ã‚’ä½¿ã†æ–¹æ³•ã¨ã€é€šå¸¸ã®é–¢æ•°ã¨ã—ã¦å®šç¾©ã™ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚

```tsx
// React.FCã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•
import React from "react";

type Props = {
  title: string;
  count: number;
};

const Component: React.FC<Props> = ({ title, count }) => {
  return (
    <div>
      <h1>{title}</h1>
      <p>Count: {count}</p>
    </div>
  );
};

// é€šå¸¸ã®é–¢æ•°ã¨ã—ã¦å®šç¾©ã™ã‚‹æ–¹æ³•ï¼ˆæ¨å¥¨ï¼‰
const Component = ({ title, count }: Props): JSX.Element => {
  return (
    <div>
      <h1>{title}</h1>
      <p>Count: {count}</p>
    </div>
  );
};
```

ç¾åœ¨ã§ã¯ã€`React.FC`ã‚ˆã‚Šã‚‚é€šå¸¸ã®é–¢æ•°ã¨ã—ã¦å®šç¾©ã™ã‚‹æ–¹æ³•ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ç†ç”±ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

- `children`ãŒæš—é»™çš„ã«å«ã¾ã‚Œãªã„ï¼ˆæ˜ç¤ºçš„ã«å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼‰
- ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã®æ‰±ã„ãŒã‚·ãƒ³ãƒ—ãƒ«
- æˆ»ã‚Šå€¤ã®å‹ã‚’æ˜ç¤ºã§ãã‚‹

### Propsã®å‹å®šç¾©

```tsx
// åŸºæœ¬çš„ãªProps
type ButtonProps = {
  label: string;
  onClick: () => void;
  disabled?: boolean; // ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«
};

// childrenã‚’å«ã‚€Props
type CardProps = {
  title: string;
  children: React.ReactNode;
};

// HTMLè¦ç´ ã®å±æ€§ã‚’ç¶™æ‰¿
type CustomButtonProps = React.ButtonHTMLAttributes<HTMLButtonElement> & {
  variant: "primary" | "secondary";
};

const CustomButton = ({ variant, ...props }: CustomButtonProps) => {
  return <button className={variant} {...props} />;
};
```

## Hooksã®å‹å®šç¾©

### useState

```tsx
import { useState } from "react";

// å‹æ¨è«–ãŒåŠ¹ãå ´åˆ
const [count, setCount] = useState(0); // numberå‹ã¨ã—ã¦æ¨è«–

// æ˜ç¤ºçš„ã«å‹ã‚’æŒ‡å®š
const [user, setUser] = useState<User | null>(null);

// è¤‡æ•°ã®å‹ã‚’æŒã¤å ´åˆ
type Status = "idle" | "loading" | "success" | "error";
const [status, setStatus] = useState<Status>("idle");
```

### useRef

```tsx
import { useRef } from "react";

// DOMè¦ç´ ã¸ã®å‚ç…§
const inputRef = useRef<HTMLInputElement>(null);

// ä½¿ç”¨ä¾‹
const focusInput = () => {
  inputRef.current?.focus();
};

return <input ref={inputRef} />;

// å€¤ã‚’ä¿æŒã™ã‚‹å ´åˆ
const countRef = useRef<number>(0);
```

### useEffect

```tsx
import { useEffect } from "react";

// åŸºæœ¬çš„ãªä½¿ã„æ–¹ï¼ˆå‹å®šç¾©ã¯ä¸è¦ï¼‰
useEffect(() => {
  // å‰¯ä½œç”¨ã®å‡¦ç†
  const timer = setTimeout(() => {
    console.log("executed");
  }, 1000);

  // ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—é–¢æ•°
  return () => {
    clearTimeout(timer);
  };
}, []);
```

### useContext

```tsx
import { createContext, useContext } from "react";

type Theme = "light" | "dark";

type ThemeContextType = {
  theme: Theme;
  toggleTheme: () => void;
};

// undefinedã‚’è¨±å®¹ã—ãªã„æ–¹æ³•
const ThemeContext = createContext<ThemeContextType>({
  theme: "light",
  toggleTheme: () => {},
});

// undefinedã‚’è¨±å®¹ã™ã‚‹æ–¹æ³•ï¼ˆæ¨å¥¨ï¼‰
const ThemeContext = createContext<ThemeContextType | undefined>(undefined);

const useTheme = () => {
  const context = useContext(ThemeContext);
  if (!context) {
    throw new Error("useTheme must be used within ThemeProvider");
  }
  return context;
};
```

### useReducer

```tsx
import { useReducer } from "react";

type State = {
  count: number;
  error: string | null;
};

type Action =
  | { type: "increment" }
  | { type: "decrement" }
  | { type: "reset" }
  | { type: "error"; payload: string };

const reducer = (state: State, action: Action): State => {
  switch (action.type) {
    case "increment":
      return { ...state, count: state.count + 1 };
    case "decrement":
      return { ...state, count: state.count - 1 };
    case "reset":
      return { ...state, count: 0 };
    case "error":
      return { ...state, error: action.payload };
    default:
      return state;
  }
};

const Counter = () => {
  const [state, dispatch] = useReducer(reducer, { count: 0, error: null });

  return (
    <div>
      <p>Count: {state.count}</p>
      <button onClick={() => dispatch({ type: "increment" })}>+</button>
      <button onClick={() => dispatch({ type: "decrement" })}>-</button>
    </div>
  );
};
```

## ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã®å‹å®šç¾©

```tsx
import { ChangeEvent, FormEvent, MouseEvent } from "react";

const Form = () => {
  // inputè¦ç´ ã®changeã‚¤ãƒ™ãƒ³ãƒˆ
  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {
    console.log(e.target.value);
  };

  // textareaè¦ç´ ã®changeã‚¤ãƒ™ãƒ³ãƒˆ
  const handleTextAreaChange = (e: ChangeEvent<HTMLTextAreaElement>) => {
    console.log(e.target.value);
  };

  // selectè¦ç´ ã®changeã‚¤ãƒ™ãƒ³ãƒˆ
  const handleSelectChange = (e: ChangeEvent<HTMLSelectElement>) => {
    console.log(e.target.value);
  };

  // formã®submitã‚¤ãƒ™ãƒ³ãƒˆ
  const handleSubmit = (e: FormEvent<HTMLFormElement>) => {
    e.preventDefault();
    // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å‡¦ç†
  };

  // buttonã®clickã‚¤ãƒ™ãƒ³ãƒˆ
  const handleClick = (e: MouseEvent<HTMLButtonElement>) => {
    console.log("clicked");
  };

  return (
    <form onSubmit={handleSubmit}>
      <input onChange={handleChange} />
      <textarea onChange={handleTextAreaChange} />
      <select onChange={handleSelectChange}>
        <option value="a">A</option>
        <option value="b">B</option>
      </select>
      <button onClick={handleClick}>Submit</button>
    </form>
  );
};
```

## ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã®å‹å®šç¾©

```tsx
import { useState, useEffect } from "react";

// åŸºæœ¬çš„ãªã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
const useCounter = (initialValue: number = 0) => {
  const [count, setCount] = useState(initialValue);

  const increment = () => setCount((prev) => prev + 1);
  const decrement = () => setCount((prev) => prev - 1);
  const reset = () => setCount(initialValue);

  return { count, increment, decrement, reset };
};

// éåŒæœŸå‡¦ç†ã‚’å«ã‚€ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
type FetchState<T> = {
  data: T | null;
  loading: boolean;
  error: Error | null;
};

const useFetch = <T,>(url: string): FetchState<T> => {
  const [state, setState] = useState<FetchState<T>>({
    data: null,
    loading: true,
    error: null,
  });

  useEffect(() => {
    const fetchData = async () => {
      try {
        const response = await fetch(url);
        const data = await response.json();
        setState({ data, loading: false, error: null });
      } catch (error) {
        setState({ data: null, loading: false, error: error as Error });
      }
    };

    fetchData();
  }, [url]);

  return state;
};

// ä½¿ç”¨ä¾‹
type User = {
  id: number;
  name: string;
};

const UserProfile = () => {
  const { data, loading, error } = useFetch<User>("/api/user/1");

  if (loading) return <div>Loading...</div>;
  if (error) return <div>Error: {error.message}</div>;
  if (!data) return <div>No data</div>;

  return <div>{data.name}</div>;
};
```

## ä¾¿åˆ©ãªãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹

```tsx
// Partial - ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã«
type User = {
  id: number;
  name: string;
  email: string;
};

type PartialUser = Partial<User>;
// { id?: number; name?: string; email?: string; }

// Required - ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å¿…é ˆã«
type RequiredUser = Required<PartialUser>;

// Pick - ç‰¹å®šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã¿ã‚’æŠ½å‡º
type UserNameAndEmail = Pick<User, "name" | "email">;
// { name: string; email: string; }

// Omit - ç‰¹å®šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’é™¤å¤–
type UserWithoutId = Omit<User, "id">;
// { name: string; email: string; }

// Record - ã‚­ãƒ¼ã¨å€¤ã®å‹ã‚’æŒ‡å®š
type UserRoles = Record<string, "admin" | "user" | "guest">;
// { [key: string]: 'admin' | 'user' | 'guest'; }

// ComponentPropsWithoutRef - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®Propså‹ã‚’å–å¾—
type ButtonProps = React.ComponentPropsWithoutRef<"button">;
```

## ã¾ã¨ã‚

Reactã§TypeScriptã‚’ä½¿ç”¨ã™ã‚‹éš›ã®ä¸»ãªå‹å®šç¾©ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã—ãŸã€‚ã“ã‚Œã‚‰ã®å‹å®šç¾©ã‚’é©åˆ‡ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ï¼š

- å‹å®‰å…¨æ€§ãŒå‘ä¸Šã—ã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼ã‚’é˜²ã’ã‚‹
- IDEã®è£œå®Œæ©Ÿèƒ½ãŒå……å®Ÿã—ã€é–‹ç™ºåŠ¹ç‡ãŒä¸ŠãŒã‚‹
- ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§ã¨ä¿å®ˆæ€§ãŒå‘ä¸Šã™ã‚‹

TypeScriptã®å‹ã‚·ã‚¹ãƒ†ãƒ ã¯å¼·åŠ›ã§ã™ãŒã€æœ€åˆã‹ã‚‰å®Œç’§ã‚’ç›®æŒ‡ã™å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãšã¯åŸºæœ¬çš„ãªå‹å®šç¾©ã‹ã‚‰å§‹ã‚ã¦ã€å¾ã€…ã«é«˜åº¦ãªå‹å®šç¾©ã‚’å–ã‚Šå…¥ã‚Œã¦ã„ãã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚
